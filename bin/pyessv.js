!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.PYESSV=t():e.PYESSV=t()}(window,function(){return function(e){var t={};function s(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,s),i.l=!0,i.exports}return s.m=e,s.c=t,s.d=function(e,t,r){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)s.d(r,i,function(t){return e[t]}.bind(null,i));return r},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s=0)}([function(e,t,s){"use strict";s.r(t);const r=(e,t)=>_.find(e,e=>e.canonicalName.toLowerCase()===t.toLowerCase());class i{constructor(e){_.each(_.keys(e),t=>{this[t]=e[t]})}isMatch(e){return e===self.canonicalName}}class n extends i{constructor(e){super(e),this.scopes=_.map(e.scopes,t=>new o(e,t))}getScope(e){return r(this.scopes,e)}}class o extends i{constructor(e,t){super(t),this.authority=e,this.collections=_.map(t.collections,s=>new c(e,t,s))}getCollection(e){return r(this.collections,e)}getTerms(e){let t=this.getCollection(e);if(t)return _.sortBy(t.terms,e=>_.has(e.data,"sortOrdinal")?e.data.sortOrdinal:e.canonicalName)}getTerm(e,t){let s=this.getCollection(e);if(s)return r(s.terms,t)}}class c extends i{constructor(e,t,s){super(s),this.authority=e,this.scope=t,this.terms=_.map(s.terms,r=>new u(e,t,s,r))}}class u extends i{constructor(e,t,s,r){super(r),this.authority=e,this.scope=t,this.collection=s}}class d extends o{constructor(e,t){super(e,t)}getModelTopic(e){return _.isUndefined(e)?this.getTerms("model-topic"):this.getTerm("model-topic",e)}}class a extends o{constructor(e,t){super(e,t)}getPidTaskAction(e){return _.isUndefined(e)?this.getTerms("pid-task-action"):this.getTerm("pid-task-action",e)}getPidTaskStatus(e){return _.isUndefined(e)?this.getTerms("pid-task-status"):this.getTerm("pid-task-status",e)}getProject(e){return _.isUndefined(e)?this.getTerms("project"):this.getTerm("project",e)}getSeverity(e){return _.isUndefined(e)?this.getTerms("severity"):this.getTerm("severity",e)}getStatus(e){return _.isUndefined(e)?this.getTerms("status"):this.getTerm("status",e)}}class l extends o{constructor(e,t){super(e,t)}}class p extends o{constructor(e,t){super(e,t)}getActivity(e){return _.isUndefined(e)?this.getTerms("activity-id"):this.getTerm("activity-id",e)}getExperiment(e){return _.isUndefined(e)?this.getTerms("experiment-id"):this.getTerm("experiment-id",e)}getInstitution(e){return _.isUndefined(e)?this.getTerms("institution-id"):this.getTerm("institution-id",e)}getSource(e){return _.isUndefined(e)?this.getTerms("source-id"):this.getTerm("source-id",e)}}class h extends o{constructor(e,t){super(e,t)}}class f extends o{constructor(e,t){super(e,t)}getMipEra(e){return _.isUndefined(e)?this.getTerms("mip-era"):this.getTerm("mip-era",e)}}s.d(t,"WCRP",function(){return g}),s.d(t,"ESDOC",function(){return m}),s.d(t,"initialise",function(){return y});let g=null,m=null;const T={dev:"http://localhost:5010",test:"https://test-pyessv.es-doc.org",prod:"https://pyessv.es-doc.org"}[window.location.host&&window.location.host.indexOf("es-doc.org")>=0?window.location.host.indexOf("test")>=0?"test":"prod":"dev"]+"/1/retrieve",y=(e,t)=>{$.get(T).done(t=>{_.each(t.data,e=>{switch(e.canonicalName){case"wcrp":g=new class extends n{constructor(e){super(e),this.CMIP5=new l(e,this.getScope("cmip5")),this.CMIP6=new p(e,this.getScope("cmip6")),this.CORDEX=new h(e,this.getScope("cordex")),this.GLOBAL=new f(e,this.getScope("global"))}}(e);break;case"esdoc":m=new class extends n{constructor(e){super(e),this.CMIP6=new d(e,this.getScope("cmip6")),this.ERRATA=new a(e,this.getScope("errata"))}}(e)}}),e()}).fail(()=>{t()})}}])});