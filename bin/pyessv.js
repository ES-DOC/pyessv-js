!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.PYESSV=t():e.PYESSV=t()}(self,(()=>(()=>{"use strict";var e={d:(t,s)=>{for(var i in s)e.o(s,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:s[i]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{ESDOC:()=>T,WCRP:()=>f,initialise:()=>w});const s=(e,t)=>_.find(e,(e=>e.canonicalName.toLowerCase()===t.toLowerCase()));class i{constructor(e){_.each(_.keys(e),(t=>{this[t]=e[t]}))}isMatch(e){return e===self.canonicalName}}class r extends i{constructor(e){super(e),this.scopes=_.map(e.scopes,(t=>new o(e,t)))}getScope(e){return s(this.scopes,e)}}class o extends i{constructor(e,t){super(t),this.authority=e,this.collections=_.map(t.collections,(s=>new n(e,t,s)))}getCollection(e){return s(this.collections,e)}getTerms(e){let t=this.getCollection(e);if(t)return _.sortBy(t.terms,(e=>_.has(e.data,"sortOrdinal")?e.data.sortOrdinal:e.canonicalName))}getTerm(e,t){let i=this.getCollection(e);if(i)return s(i.terms,t)}}class n extends i{constructor(e,t,s){super(s),this.authority=e,this.scope=t,this.terms=_.map(s.terms,(i=>new c(e,t,s,i)))}}class c extends i{constructor(e,t,s,i){super(i),this.authority=e,this.scope=t,this.collection=s}}class a extends r{constructor(e){super(e),this.CMIP6=new d(e,this.getScope("cmip6")),this.ERRATA=new u(e,this.getScope("errata"))}}class d extends o{constructor(e,t){super(e,t)}getModelTopic(e){return _.isUndefined(e)?this.getTerms("model-topic"):this.getTerm("model-topic",e)}}class u extends o{constructor(e,t){super(e,t)}getModerationStatus(e){return _.isUndefined(e)?this.getTerms("moderation-status"):this.getTerm("moderation-status",e)}getPidTaskAction(e){return _.isUndefined(e)?this.getTerms("pid-task-action"):this.getTerm("pid-task-action",e)}getPidTaskStatus(e){return _.isUndefined(e)?this.getTerms("pid-task-status"):this.getTerm("pid-task-status",e)}getProject(e){return _.isUndefined(e)?this.getTerms("project"):this.getTerm("project",e)}getSeverity(e){return _.isUndefined(e)?this.getTerms("severity"):this.getTerm("severity",e)}getStatus(e){return _.isUndefined(e)?this.getTerms("status"):this.getTerm("status",e)}}class p extends r{constructor(e){super(e),this.CMIP5=new h(e,this.getScope("cmip5")),this.CMIP6=new l(e,this.getScope("cmip6")),this.CORDEX=new g(e,this.getScope("cordex")),this.GLOBAL=new m(e,this.getScope("global"))}}class h extends o{constructor(e,t){super(e,t)}}class l extends o{constructor(e,t){super(e,t)}getActivity(e){return _.isUndefined(e)?this.getTerms("activity-id"):this.getTerm("activity-id",e)}getExperiment(e){return _.isUndefined(e)?this.getTerms("experiment-id"):this.getTerm("experiment-id",e)}getInstitution(e){return _.isUndefined(e)?this.getTerms("institution-id"):this.getTerm("institution-id",e)}getSource(e){return _.isUndefined(e)?this.getTerms("source-id"):this.getTerm("source-id",e)}}class g extends o{constructor(e,t){super(e,t)}}class m extends o{constructor(e,t){super(e,t)}getMipEra(e){return _.isUndefined(e)?this.getTerms("mip-era"):this.getTerm("mip-era",e)}}let f=null,T=null;const y={dev:"http://localhost:5010",test:"https://test-pyessv.es-doc.org",prod:"https://pyessv.es-doc.org"}[window.location.host&&window.location.host.indexOf("es-doc.org")>=0?window.location.host.indexOf("test")>=0?"test":"prod":"dev"]+"/1/retrieve",w=(e,t)=>{$.get(y).done((t=>{_.each(t.data,(e=>{switch(e.canonicalName){case"wcrp":f=new p(e);break;case"esdoc":T=new a(e)}})),e()})).fail((()=>{t()}))};return t})()));